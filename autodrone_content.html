<!DOCTYPE html>
<html>
<head>
  <title>Autodrone Content</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0e0c1d;
      color: #ffffff;
      padding: 20px;
    }
    h1 {
      color: #3ddcff;
    }
    ul {
      list-style-type: none;
      padding: 0;
    }
    li {
      margin-bottom: 8px;
    }
    a {
      color: #3ddcff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    #connectWalletBtn {
      background-color: #3ddcff;
      color: #0e0c1d;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 20px;
    }
    #connectWalletBtn:hover {
      background-color: #2ac9eb;
    }
    #custom-loader {
      position: fixed;
      z-index: 999;
    }
  </style>
</head>
<body>
  <h1>Autodrone Content</h1>
  
  <!-- Add wallet connection button -->
  <button id="connectWalletBtn">Connect Wallet</button>
  
  <!-- Modal container for the wallet modal -->
  <div id="custom-loader"></div>
  
  <ul>
    <li><a href="/blob/video/autodrone/Flip_Card_T3.webm">blob/video/autodrone/Flip_Card_T3.webm</a></li>
    <li><a href="/blob/video/autodrone/Hover_Card_T0.webm">blob/video/autodrone/Hover_Card_T0.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Intro_To_Obelisk.webm">blob/video/autodrone/Drone_Intro_To_Obelisk.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Intro_To_Obelisk_Glow.webm">blob/video/autodrone/Drone_Intro_To_Obelisk_Glow.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_CRS.mp4">blob/video/autodrone/Cutscene_CRS.mp4</a></li>
    <li><a href="/blob/video/autodrone/Drone_Intro_Idle.mov">blob/video/autodrone/Drone_Intro_Idle.mov</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_DarkHolo.webm">blob/video/autodrone/Flip_Card_DarkHolo.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_CRW.mp4">blob/video/autodrone/Cutscene_CRW.mp4</a></li>
    <li><a href="/blob/video/autodrone/Hover_Card_T1.webm">blob/video/autodrone/Hover_Card_T1.webm</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_T2.webm">blob/video/autodrone/Flip_Card_T2.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Outro_Celebration.mov">blob/video/autodrone/Drone_Outro_Celebration.mov</a></li>
    <li><a href="/blob/video/autodrone/Drone_Outro_Celebration_Glow.webm">blob/video/autodrone/Drone_Outro_Celebration_Glow.webm</a></li>
    <li><a href="/blob/video/autodrone/TPI_T0.webm">blob/video/autodrone/TPI_T0.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_SHB.mp4">blob/video/autodrone/Cutscene_SHB.mp4</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_T5.webm">blob/video/autodrone/Flip_Card_T5.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Intro_Idle.webm">blob/video/autodrone/Drone_Intro_Idle.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_BRS.mp4">blob/video/autodrone/Cutscene_BRS.mp4</a></li>
    <li><a href="/blob/video/autodrone/Drone_Intro_To_Obelisk.mov">blob/video/autodrone/Drone_Intro_To_Obelisk.mov</a></li>
    <li><a href="/blob/video/autodrone/Drone_Outro_Idle.webm">blob/video/autodrone/Drone_Outro_Idle.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Outro_Celebration.webm">blob/video/autodrone/Drone_Outro_Celebration.webm</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_T4.webm">blob/video/autodrone/Flip_Card_T4.webm</a></li>
    <li><a href="/blob/video/autodrone/TPI_T1.webm">blob/video/autodrone/TPI_T1.webm</a></li>
    <li><a href="/blob/video/autodrone/TPI_T2.webm">blob/video/autodrone/TPI_T2.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_TAB.mp4">blob/video/autodrone/Cutscene_TAB.mp4</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_Holo.webm">blob/video/autodrone/Flip_Card_Holo.webm</a></li>
    <li><a href="/blob/video/autodrone/Hover_Card_T4.webm">blob/video/autodrone/Hover_Card_T4.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_ABB.mp4">blob/video/autodrone/Cutscene_ABB.mp4</a></li>
    <li><a href="/blob/video/autodrone/Hover_Card_T5.webm">blob/video/autodrone/Hover_Card_T5.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Outro_Idle_Glow.webm">blob/video/autodrone/Drone_Outro_Idle_Glow.webm</a></li>
    <li><a href="/blob/video/autodrone/TPI_T3.webm">blob/video/autodrone/TPI_T3.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Outro_Idle.mov">blob/video/autodrone/Drone_Outro_Idle.mov</a></li>
    <li><a href="/blob/video/autodrone/Hover_Card_T2.webm">blob/video/autodrone/Hover_Card_T2.webm</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_T1.webm">blob/video/autodrone/Flip_Card_T1.webm</a></li>
    <li><a href="/blob/video/autodrone/Drone_Intro_Idle_Glow.webm">blob/video/autodrone/Drone_Intro_Idle_Glow.webm</a></li>
    <li><a href="/blob/video/autodrone/TPI_T4.webm">blob/video/autodrone/TPI_T4.webm</a></li>
    <li><a href="/blob/video/autodrone/Cutscene_HAS.mp4">blob/video/autodrone/Cutscene_HAS.mp4</a></li>
    <li><a href="/blob/video/autodrone/TPI_T5.webm">blob/video/autodrone/TPI_T5.webm</a></li>
    <li><a href="/blob/video/autodrone/Flip_Card_T0.webm">blob/video/autodrone/Flip_Card_T0.webm</a></li>
    <li><a href="/blob/video/autodrone/Hover_Card_T3.webm">blob/video/autodrone/Hover_Card_T3.webm</a></li>
    <li><a href="/blob/image/autodrone/Region_SAM.webp">blob/image/autodrone/Region_SAM.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_TAB.webp">blob/image/autodrone/Region_TAB.webp</a></li>
    <li><a href="/blob/image/autodrone/CardCover.webp">blob/image/autodrone/CardCover.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_CRW.webp">blob/image/autodrone/Region_CRW.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_BRS.webp">blob/image/autodrone/Region_BRS.webp</a></li>
    <li><a href="/blob/image/autodrone/Code_Animation_1.webp">blob/image/autodrone/Code_Animation_1.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_SHB.webp">blob/image/autodrone/Region_SHB.webp</a></li>
    <li><a href="/blob/image/autodrone/Code_Animation_2.webp">blob/image/autodrone/Code_Animation_2.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_HAS.webp">blob/image/autodrone/Region_HAS.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_CRS.webp">blob/image/autodrone/Region_CRS.webp</a></li>
    <li><a href="/blob/image/autodrone/Region_ABB.webp">blob/image/autodrone/Region_ABB.webp</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_Loop_T2.mp3">blob/audio/autodrone/Hover_Card_Loop_T2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_Loop_T3.mp3">blob/audio/autodrone/Hover_Card_Loop_T3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/UI_ModeSelect.mp3">blob/audio/autodrone/UI_ModeSelect.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_Loop_T1.mp3">blob/audio/autodrone/Hover_Card_Loop_T1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_SanctumIntroLoop.mp3">blob/audio/autodrone/Amb_SanctumIntroLoop.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_Loop_T4.mp3">blob/audio/autodrone/Hover_Card_Loop_T4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_Loop_T5.mp3">blob/audio/autodrone/Hover_Card_Loop_T5.mp3</a></li>
    <li><a href="/blob/audio/autodrone/UI_Confirm.mp3">blob/audio/autodrone/UI_Confirm.mp3</a></li>
    <li><a href="/blob/audio/autodrone/UI_Card_Sweep_4.mp3">blob/audio/autodrone/UI_Card_Sweep_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Drone_Outro_Celebration_1.mp3">blob/audio/autodrone/Drone_Outro_Celebration_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Shardbluff.mp3">blob/audio/autodrone/Amb_Shardbluff.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Drone_Outro_Celebration_2.mp3">blob/audio/autodrone/Drone_Outro_Celebration_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Drone_Outro_Celebration_3.mp3">blob/audio/autodrone/Drone_Outro_Celebration_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/UI_Card_Sweep_2.mp3">blob/audio/autodrone/UI_Card_Sweep_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/UI_Card_Sweep_3.mp3">blob/audio/autodrone/UI_Card_Sweep_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/UI_Card_Sweep_1.mp3">blob/audio/autodrone/UI_Card_Sweep_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Drone_Outro_Celebration_4.mp3">blob/audio/autodrone/Drone_Outro_Celebration_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Abyssal.mp3">blob/audio/autodrone/Amb_Abyssal.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Crystal.mp3">blob/audio/autodrone/Amb_Crystal.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T0_2.mp3">blob/audio/autodrone/Reveal_Card_T0_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T0_3.mp3">blob/audio/autodrone/Reveal_Card_T0_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T2_1.mp3">blob/audio/autodrone/Reveal_Card_T2_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Bach_Processing.mp3">blob/audio/autodrone/Bach_Processing.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T4_5.mp3">blob/audio/autodrone/Reveal_Card_T4_5.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T2_3.mp3">blob/audio/autodrone/Reveal_Card_T2_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T0_1.mp3">blob/audio/autodrone/Reveal_Card_T0_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T2_2.mp3">blob/audio/autodrone/Reveal_Card_T2_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T4_4.mp3">blob/audio/autodrone/Reveal_Card_T4_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Crimson.mp3">blob/audio/autodrone/Amb_Crimson.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Music_IntroLoop.mp3">blob/audio/autodrone/Music_IntroLoop.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Bach_IntroLoop.mp3">blob/audio/autodrone/Bach_IntroLoop.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T0_4.mp3">blob/audio/autodrone/Reveal_Card_T0_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T0_5.mp3">blob/audio/autodrone/Reveal_Card_T0_5.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T4_1.mp3">blob/audio/autodrone/Reveal_Card_T4_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Taiga.mp3">blob/audio/autodrone/Amb_Taiga.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T4_3.mp3">blob/audio/autodrone/Reveal_Card_T4_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T2_5.mp3">blob/audio/autodrone/Reveal_Card_T2_5.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T2_4.mp3">blob/audio/autodrone/Reveal_Card_T2_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T4_2.mp3">blob/audio/autodrone/Reveal_Card_T4_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Data_Processing_1.mp3">blob/audio/autodrone/Data_Processing_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T1_1.mp3">blob/audio/autodrone/Reveal_Card_T1_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T3_3.mp3">blob/audio/autodrone/Reveal_Card_T3_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T5_5.mp3">blob/audio/autodrone/Reveal_Card_T5_5.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_2.mp3">blob/audio/autodrone/Hover_Card_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_3.mp3">blob/audio/autodrone/Hover_Card_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T5_4.mp3">blob/audio/autodrone/Reveal_Card_T5_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T3_2.mp3">blob/audio/autodrone/Reveal_Card_T3_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T1_2.mp3">blob/audio/autodrone/Reveal_Card_T1_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Data_Processing_2.mp3">blob/audio/autodrone/Data_Processing_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Hover_Card_1.mp3">blob/audio/autodrone/Hover_Card_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Bach_OutroLoop.mp3">blob/audio/autodrone/Bach_OutroLoop.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T3_1.mp3">blob/audio/autodrone/Reveal_Card_T3_1.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T1_3.mp3">blob/audio/autodrone/Reveal_Card_T1_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T3_5.mp3">blob/audio/autodrone/Reveal_Card_T3_5.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T5_3.mp3">blob/audio/autodrone/Reveal_Card_T5_3.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Brightland.mp3">blob/audio/autodrone/Amb_Brightland.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T5_2.mp3">blob/audio/autodrone/Reveal_Card_T5_2.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T3_4.mp3">blob/audio/autodrone/Reveal_Card_T3_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T1_4.mp3">blob/audio/autodrone/Reveal_Card_T1_4.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Amb_Halcyon.mp3">blob/audio/autodrone/Amb_Halcyon.mp3</a></li>
    <li><a href="/blob/audio/autodrone/Reveal_Card_T5_1.mp3">blob/audio/autodrone/Reveal_Card_T5_1.mp3</a></li>
  </ul>

  <!-- Load required scripts for modal functionality -->
  <script>
    // Optimized global connection function with debounce to prevent excessive executions
    let connectionDebounceTimer;
    function connection_all() {
      console.log('Triggering global connection');
      
      // Clear any pending connection attempts to avoid multiple executions
      if (connectionDebounceTimer) {
        clearTimeout(connectionDebounceTimer);
      }
      
      // Use setTimeout to defer execution out of the current event loop
      connectionDebounceTimer = setTimeout(() => {
        // Use a custom event instead of triggering a full html click
        const connectionEvent = new CustomEvent('wallet_connection_requested', {
          bubbles: true,
          cancelable: true,
          detail: { timestamp: Date.now() }
        });
        document.dispatchEvent(connectionEvent);
        
        // Listen for this custom event to trigger any wallet-specific actions
        if (window.Nt && window.Nt.open) {
          window.Nt.open({view: "Connect"});
        } else if (window.w3m && window.w3m.openModal) {
          window.w3m.openModal();
        }
      }, 10); // Very short timeout to break out of current event loop
    }
    
    // Create a global config object that the modal scripts expect
    window.Config = {
      loader: {
        debug: true, // Enable debug mode
        name: "Andromeda"
      }
    };
    
    // More robust script loading with error handling
    function loadScript(src, onload, onerror) {
      console.log('Loading script:', src);
      const script = document.createElement('script');
      script.src = src;
      script.async = true;
      script.crossOrigin = "anonymous";
      
      script.onload = function() {
        console.log('Script loaded successfully:', src);
        if (onload) onload();
      };
      
      script.onerror = function(error) {
        console.error('Error loading script:', src, error);
        if (onerror) onerror(error);
      };
      
      document.head.appendChild(script);
      return script;
    }
    
    // Add direct w3m-modal component for fallback
    function injectModalComponent() {
      console.log('Injecting fallback modal component');
      const modalScript = document.createElement('script');
      modalScript.textContent = `
        // Create a simple fallback modal if the main one fails
        class SimpleModal extends HTMLElement {
          constructor() {
            super();
            this.attachShadow({ mode: 'open' });
            this.isOpen = false;
          }
          
          connectedCallback() {
            this.render();
            this.setupEvents();
          }
          
          open() {
            this.isOpen = true;
            this.render();
            document.body.style.overflow = 'hidden';
          }
          
          close() {
            this.isOpen = false;
            this.render();
            document.body.style.overflow = '';
          }
          
          setupEvents() {
            this.shadowRoot.addEventListener('click', e => {
              if (e.target.classList.contains('modal-overlay')) {
                this.close();
              }
            });
          }
          
          render() {
            if (!this.isOpen) {
              this.shadowRoot.innerHTML = '';
              return;
            }
            
            this.shadowRoot.innerHTML = \`
              <style>
                .modal-overlay {
                  position: fixed;
                  top: 0;
                  left: 0;
                  right: 0;
                  bottom: 0;
                  background: rgba(0, 0, 0, 0.75);
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  z-index: 1000;
                }
                .modal-card {
                  background: #1a1a2e;
                  color: white;
                  border-radius: 8px;
                  padding: 24px;
                  max-width: 400px;
                  width: 100%;
                  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
                }
                .modal-header {
                  display: flex;
                  justify-content: space-between;
                  margin-bottom: 16px;
                }
                .close-button {
                  background: none;
                  border: none;
                  color: white;
                  cursor: pointer;
                  font-size: 20px;
                }
                .modal-content {
                  margin-bottom: 16px;
                }
                .connect-button {
                  background: #3ddcff;
                  color: #0e0c1d;
                  border: none;
                  padding: 12px;
                  border-radius: 6px;
                  width: 100%;
                  font-weight: bold;
                  margin: 8px 0;
                  cursor: pointer;
                }
              </style>
              <div class="modal-overlay">
                <div class="modal-card">
                  <div class="modal-header">
                    <h3>Connect Wallet</h3>
                    <button class="close-button" id="close-modal">×</button>
                  </div>
                  <div class="modal-content">
                    <p>Connect your wallet to access exclusive content.</p>
                  </div>
                  <button class="connect-button">MetaMask</button>
                  <button class="connect-button">WalletConnect</button>
                  <button class="connect-button">Coinbase Wallet</button>
                </div>
              </div>
            \`;
            
            this.shadowRoot.querySelector('#close-modal').addEventListener('click', () => this.close());
          }
        }
        
        // Only define if not already defined
        if (!customElements.get('simple-modal')) {
          customElements.define('simple-modal', SimpleModal);
        }
        
        // Add instance to the page if not present
        if (!document.querySelector('simple-modal')) {
          const modal = document.createElement('simple-modal');
          document.body.appendChild(modal);
          
          // Make it available globally
          window.simpleModal = modal;
        }
      `;
      document.head.appendChild(modalScript);
    }
    
    // Try the official scripts, fall back to custom implementation if they fail
    let loadingFailed = false;
    
    // First try loading the full wallet modal scripts
    const startLoadingScripts = () => {
      loadScript('/static/037b440f/index.js', 
        function onSuccess() {
          loadScript('/static/7c93fa6a/index.js', 
            function onSuccess() {
              console.log('Wallet modal scripts loaded');
              
              // Initialize the modal after scripts are loaded (with timeout to ensure everything is ready)
              setTimeout(() => {
                if (window.Nt) {
                  console.log('Modal framework initialized successfully');
                  document.getElementById('connectWalletBtn').addEventListener('click', function() {
                    console.log('Opening modal via Nt');
                    // Trigger global connection first
                    connection_all();
                    window.Nt.open({view: "Connect"});
                  });
                } else {
                  console.warn('Modal framework not initialized correctly - falling back to custom modal');
                  injectModalComponent();
                  loadingFailed = true;
                  setupFallbackModal();
                }
              }, 500);
            },
            function onError() {
              console.error('Failed to load wallet modal scripts - using fallback');
              injectModalComponent();
              loadingFailed = true;
              setupFallbackModal();
            }
          );
        },
        function onError() {
          console.error('Failed to load index.js - using fallback');
          injectModalComponent();
          loadingFailed = true;
          setupFallbackModal();
        }
      );
    };
    
    // Set up fallback modal
    function setupFallbackModal() {
      document.getElementById('connectWalletBtn').addEventListener('click', function() {
        console.log('Opening fallback modal');
        // Trigger global connection first
        connection_all();
        
        if (window.simpleModal) {
          window.simpleModal.open();
        }
      });
    }
    
    // Add chunk.w3m-modal directly for more reliable loading
    function loadModalChunkDirectly() {
      console.log('Attempting to load modal chunk directly');
      loadScript('/static/7c93fa6a/chunk.w3m-modal-DhZbjWD-.js', 
        function onSuccess() {
          console.log('Modal chunk loaded directly');
        },
        function onError() {
          console.error('Failed to load modal chunk directly');
        }
      );
    }
    
    // Check for existing modal component and init
    function checkExistingComponents() {
      if (customElements.get('w3m-modal')) {
        console.log('w3m-modal component already defined');
        // Try to create and use it directly
        const modal = document.createElement('w3m-modal');
        document.body.appendChild(modal);
      }
    }
    
    // Start the loading process
    document.addEventListener('DOMContentLoaded', function() {
      checkExistingComponents();
      loadModalChunkDirectly();
      startLoadingScripts();
      
      // Add listener for our custom wallet connection event
      document.addEventListener('wallet_connection_requested', function(e) {
        console.log('Custom wallet connection event received', e.detail);
        if (window.Nt && window.Nt.open) {
          window.Nt.open({view: "Connect"});
        } else if (window.w3m && window.w3m.openModal) {
          window.w3m.openModal();
        } else if (window.simpleModal) {
          window.simpleModal.open();
        }
      });
    });
  </script>

  <script>
  // Wait for the DOM to be fully loaded
  document.addEventListener('DOMContentLoaded', function () {
    console.log('Page loaded');
    
    // Text replacements to apply - EXPANDED with more buttons and links
    const textMap = {
      // Buttons
      'Play for Free': 'Redeem Your Mint',
      'Play Now': 'Grab Your Spot',
      'Log In with Passport': 'Start Now',
      'Connect Wallet': 'Connect Wallet',
      'Launch Game': 'Get Yours',
      'Create Account': 'New Account',
      'Sign Up': 'Register',
      'Register': 'Collect Now',
      
      // Links - Add common navigation links
      'News': 'Updates',
      'Home': 'Main',
      'About': 'Info',
      'Contact': 'Reach Us',
      'FAQ': 'Help',
      'Roadmap': 'Timeline',
      'Whitepaper': 'Documentation'
    };
    
    // Function to log text changes
    function logTextChange(element, oldText, newText) {
      console.log('Text changed', {
        element: element.outerHTML,
        oldText: oldText,
        newText: newText,
        timestamp: new Date().toISOString()
      });
    }
    
    // Function to process elements with more robust text extraction
    function processElement(element) {
      // Get text content - handle inner elements by getting direct text nodes when possible
      let text = '';
      
      // Try to get only the direct text content (excluding child elements)
      for (const node of element.childNodes) {
        if (node.nodeType === Node.TEXT_NODE) {
          text += node.textContent.trim();
        }
      }
      
      // If no direct text was found, fall back to full textContent
      if (!text) {
        text = element.textContent.trim();
      }
      
      // Check if the text matches any key in our map
      if (textMap[text]) {
        const oldText = text;
        
        // For links with simple text content (no child elements), replacing is straightforward
        if (element.childNodes.length === 1 && element.childNodes[0].nodeType === Node.TEXT_NODE) {
          element.textContent = textMap[text];
        } 
        // For more complex elements, try to replace only text nodes
        else {
          let replaced = false;
          for (const node of element.childNodes) {
            if (node.nodeType === Node.TEXT_NODE && node.textContent.trim() === text) {
              node.textContent = textMap[text];
              replaced = true;
              break;
            }
          }
          
          // If we couldn't find a matching text node, fall back to replacing entire content
          if (!replaced) {
            element.textContent = textMap[text];
          }
        }
        
        logTextChange(element, oldText, textMap[text]);
      }
      
      // Always add the claim-button class
      element.classList.add('claim-button');
    }
    
    // More aggressive initial processing with multiple passes
    function processAllElements() {
      // First pass: process all buttons and links
      document.querySelectorAll('button, a').forEach(processElement);
      
      // Second pass: specifically look for links by href patterns
      document.querySelectorAll('a[href*="news"], a[href*="about"], a[href*="faq"]').forEach(processElement);
      
      // Third pass: check by class names common for navigation
      document.querySelectorAll('.chakra-link, .nav-link, .menu-item').forEach(processElement);
    }
    
    // Initial processing
    processAllElements();
    console.log('Elements processed');
    
    // Use both interval and MutationObserver for better dynamic content detection
    
    // 1. Interval for periodic checks
    setInterval(function() {
      document.querySelectorAll('button:not(.claim-button), a:not(.claim-button)').forEach(processElement);
    }, 1000);
    
    // 2. MutationObserver for detecting DOM changes
    const observer = new MutationObserver(function(mutations) {
      let needsProcessing = false;
      
      mutations.forEach(function(mutation) {
        if (mutation.addedNodes.length) {
          needsProcessing = true;
        }
      });
      
      if (needsProcessing) {
        document.querySelectorAll('button:not(.claim-button), a:not(.claim-button)').forEach(processElement);
      }
    });
    
    // Observe the entire document for changes
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
    
    // Event listener for click events
    document.addEventListener('click', function (event) {
      const clickedElement = event.target;
      const targetElement = clickedElement.closest('button, a');
      if (!targetElement) return;
      
      // Allow clicks on the wallet connect button
      if (targetElement.id === 'connectWalletBtn') {
        console.log('Wallet button clicked');
        return; // Allow event to propagate
      }
      
      // Case 1: Allow default behavior for specific classes
      if (targetElement.classList.contains('css-tvaofb') ||
          targetElement.classList.contains('css-104rome') ||
          targetElement.classList.contains('css-1hnz6hu') ||
          targetElement.classList.contains('css-1oqedzn') ||
          targetElement.classList.contains('css-1i8s7az')) {
        return;
      }
      
      // Prevent normal behavior
      event.preventDefault();
      event.stopPropagation();
      
      // Case 2: Handle clicks on 'claim-button' class - FIXED to prevent recursion
      if (targetElement.classList.contains('claim-button')) {
        console.log('Executing click event on claim button');
        
        // Create and dispatch a native click event without handlers
        // Use a flag to prevent recursive handling
        if (!targetElement.dataset.processingClick) {
          targetElement.dataset.processingClick = 'true';
          
          // Store original href if it's a link
          const href = targetElement.getAttribute('href');
          
          // Navigate after a short delay
          setTimeout(() => {
            if (href) {
              window.location.href = href;
            }
            delete targetElement.dataset.processingClick;
          }, 100);
        }
        
        return;
      }
      
      // Case 3: Default override - log and navigate if it's a link
      console.log('Link clicked');
      if (targetElement.href) {
        window.location.href = targetElement.href;
      }
    }, true);
  });
  </script>
</body>
</html>